<div class="dashboard-container">
  <!-- Header Bar -->
  <div class="dashboard-header">
    <div class="header-left">
      <select 
        class="header-dropdown"
        [value]="store.selectedOrganization()"
        (change)="onOrganizationChange($any($event.target).value)">
        @for (org of store.organizations(); track org) {
          <option [value]="org">{{ org }}</option>
        }
      </select>
    </div>
    <div class="header-right">
      <select 
        class="header-dropdown"
        [value]="store.selectedDateRange()"
        (change)="onDateRangeChange($any($event.target).value)">
        @for (range of store.dateRanges(); track range) {
          <option [value]="range">{{ range }}</option>
        }
      </select>
    </div>
  </div>

  <!-- KPI Cards Section -->
  <div class="kpi-section">
    @for (kpi of store.filteredKpiData(); track kpi.title) {
      <app-kpi-card
        [title]="kpi.title"
        [value]="kpi.value"
        [change]="kpi.change ?? 0"
        [changeLabel]="kpi.changeLabel ?? undefined"
        [description]="kpi.description ?? undefined"
        [icon]="kpi.icon ?? undefined">
      </app-kpi-card>
    }
  </div>

  <!-- Stacked Area Chart -->
  <div class="chart-container">
    <app-line-chart
      [data]="store.filteredStackedAreaData()"
      [title]="'USECASE DEVELOPMENT OVER TIME'"
      [subtitle]="'Usecases deployed by Business Unit'"
      [height]="400">
    </app-line-chart>
  </div>

  <!-- Donut Charts Section -->
  <div class="donut-charts-section">
    <div class="donut-chart-item">
      <app-donut-chart
        [data]="store.filteredValueDonutData()"
        [title]="'USECASES BY VALUE'"
        [height]="350">
      </app-donut-chart>
    </div>
    <div class="donut-chart-item">
      <app-donut-chart
        [data]="store.filteredRiskTierDonutData()"
        [title]="'USECASES BY RISK TIER'"
        [height]="350">
      </app-donut-chart>
    </div>
  </div>
</div>
